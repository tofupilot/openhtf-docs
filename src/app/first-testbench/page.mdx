# Running a first testbench

Let's create our first test bench and explore the basic concept of the test plan. {{ className: 'lead' }}

## Installation

1. **Install Python**:

   - [Download Python](https://www.python.org/downloads/) and follow the installation instructions for your operating system.
   - Verify the installation by running `python --version` in your command line.

2. **Set Up Virtual Environment**:

   - Create a virtual environment to manage dependencies:

   ```sh
   python -m venv venv
   ```

   - Activate the virtual environment:
     - **Windows**: `venv\Scripts\activate`
     - **Linux/Mac**: `source venv/bin/activate`

3. **Install OpenHTF**:

   - Install using pip:

   ```sh
   pip install openhtf six
   ```

## Key concepts

- Tests: The top-level abstraction representing a sequence of steps performed on a Device Under Test (DUT).
- Phases: Logical blocks within a test, usually defined as Python functions, which can include measurements and control commands.
- Measurements: Data collected during tests, often with pass/fail criteria.
- Attachments: Additional data linked to a test, such as logs or binary files.
- Plugs: Interfaces that connect OpenHTF to different types of hardware or test equipment.

OpenHTF also features a web-based GUI for ease of use in environments like manufacturing floors, where operators may need to interact with tests without deep technical knowledge.

## Create the test script

Create a file called `main.py` in the folder where you installed OpenHTF and copy this code.

```python {{ title: 'main.py' }}
from openhtf import Test, PhaseResult, plugs
from openhtf.plugs.user_input import UserInput

# Define the test phase
@plugs.plug(prompts=UserInput)
def power_on_test(test, prompts):
    prompts.prompt('Power on the device and press Return.')
    test.dut_id = 'PCB12345'
    return PhaseResult.CONTINUE

# Create a test instance with the defined phase
test = Test(power_on_test)

if __name__ == '__main__':
    test.execute()
```

This simple testbench interacts with the operator by displaying "Power on the device and press Return."

<Note>
  Did you know about the @ syntax in Python, called decorators? They modify
  functions or methods using other functions. For more details, see the
  [official Python
  documentation](https://docs.python.org/3/glossary.html#term-decorator).
</Note>

## Run in command line

Run it using the created virtual environment:

```sh
python main.py
```

This test bench does not use the operator UI yet, so all interactions are made through the command line.

```sh
(venv) C:\tofupilot > python main.py
Power on the device and press Return.
-->

================ test: openhtf_test  outcome: PASS ================
```

## Run in operator UI

OpenHTF provides a web interface for interacting with the test operator. It guides through manual operations and displays logs and results of test phases.

Then, modify `main.py` to use the web interface:

```python
if __name__ == '__main__':
    plan.no_trigger()
    plan.run()
```

Run the new test bench. The web interface will load automatically in your browser.

![Exploring the web interface](img/web.png)

1. **Operator Input**: Displays prompts and forms.
2. **Continue Test**: Click "Okay" to proceed.
3. **Running Status**: Shows elapsed time.
4. **Current Phase**: Displays the current phase and upcoming phases.
5. **Logs**: Lists operations and logs.

Run your test another time using the X button. You can come back to the result of the first test using the Logs interface on the side.

![Detailed test results](img/web-past-selected.png)
